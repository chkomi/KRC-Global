<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìƒí•˜ì´ 11ì›” ì—¬í–‰ ê³„íš</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f7f6;
            color: #333;
            height: 100vh;
            overflow: hidden;
        }

        /* ìƒë‹¨ íƒ€ì´í‹€ ë°•ìŠ¤ */
        .title-box {
            position: absolute;
            top: 15px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(44, 62, 80, 0.95);
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            z-index: 1000;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .title-box h1 {
            margin: 0;
            font-size: 1.4em;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* ì „ì²´ í™”ë©´ ì§€ë„ */
        #map {
            width: 100vw;
            height: 100vh;
            z-index: 1;
        }

        /* ë²”ë¡€ ë°•ìŠ¤ */
        .legend-box {
            position: absolute;
            top: 80px;
            right: 15px;
            background: rgba(255, 255, 255, 0.95);
            padding: 15px;
            border-radius: 12px;
            z-index: 1000;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 0, 0, 0.1);
            max-width: 200px;
        }

        .legend-box h3 {
            margin: 0 0 12px 0;
            color: #2c3e50;
            font-size: 1em;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .legend-box ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .legend-box li {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            font-size: 0.85em;
        }

        .marker-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin-right: 8px;
            color: white;
            font-size: 10px;
            font-weight: bold;
        }

        .tourism-marker { background-color: #e74c3c; }
        .restaurant-marker { background-color: #27ae60; }
        .airport-marker { background-color: #9b59b6; }
        .accommodation-marker { background-color: #3498db; }

        /* ì¥ì†Œ ì •ë³´ ë°•ìŠ¤ */
        .info-box {
            position: absolute;
            bottom: 15px;
            left: 15px;
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 12px;
            z-index: 1000;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 0, 0, 0.1);
            max-width: 350px;
            max-height: 300px;
            overflow-y: auto;
            display: none;
        }

        .info-box.show {
            display: block;
            animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .info-box h3 {
            margin: 0 0 12px 0;
            color: #2c3e50;
            font-size: 1.1em;
            border-left: 4px solid #3498db;
            padding-left: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .info-box p {
            margin: 6px 0;
            font-size: 0.9em;
            line-height: 1.4;
        }

        .info-box strong {
            color: #3498db;
            font-weight: 600;
        }

        .place-type-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 15px;
            color: white;
            font-size: 0.75em;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .type-ê´€ê´‘ì§€ { background-color: #e74c3c; }
        .type-ìŒì‹ì  { background-color: #27ae60; }
        .type-airport { background-color: #9b59b6; }
        .type-accommodation { background-color: #3498db; }

        .rating-stars {
            color: #f39c12;
            margin-left: 5px;
            font-size: 0.9em;
        }

        .close-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.2em;
            color: #7f8c8d;
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            transition: all 0.2s;
        }

        .close-btn:hover {
            background-color: #ecf0f1;
            color: #2c3e50;
        }

        /* ì»¤ìŠ¤í…€ ë§ˆì»¤ ìŠ¤íƒ€ì¼ */
        .custom-marker-icon {
            background: transparent;
            border: none;
            border-radius: 50%;
        }

        .marker-content {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            color: white;
            font-size: 16px;
            font-weight: bold;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
            border: 3px solid white;
            transition: transform 0.2s;
        }

        .marker-content:hover {
            transform: scale(1.1);
        }

        .tourism-bg { background-color: #e74c3c; }
        .restaurant-bg { background-color: #27ae60; }
        .airport-bg { background-color: #9b59b6; }
        .accommodation-bg { background-color: #3498db; }

        /* Leaflet íˆ´íŒ ìŠ¤íƒ€ì¼ */
        .leaflet-tooltip {
            padding: 6px 12px !important;
            background-color: rgba(0, 0, 0, 0.8) !important;
            color: white !important;
            border: none !important;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important;
            font-weight: bold;
            font-size: 0.9em;
            white-space: nowrap;
            pointer-events: none;
            border-radius: 4px;
        }

        .leaflet-tooltip.leaflet-tooltip-bottom:before {
            border-top-color: rgba(0, 0, 0, 0.8) !important;
        }

        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 768px) {
            .title-box {
                top: 10px;
                left: 10px;
                right: 10px;
                transform: none;
                padding: 10px 16px;
            }

            .title-box h1 {
                font-size: 1.2em;
                text-align: center;
            }

            .legend-box {
                top: 70px;
                right: 10px;
                padding: 12px;
                max-width: 160px;
            }

            .legend-box h3 {
                font-size: 0.9em;
            }

            .legend-box li {
                font-size: 0.8em;
            }

            .info-box {
                bottom: 10px;
                left: 10px;
                right: 10px;
                max-width: none;
                padding: 15px;
            }
        }

        /* ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ */
        .info-box::-webkit-scrollbar {
            width: 6px;
        }

        .info-box::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 3px;
        }

        .info-box::-webkit-scrollbar-thumb {
            background: #bdc3c7;
            border-radius: 3px;
        }

        .info-box::-webkit-scrollbar-thumb:hover {
            background: #95a5a6;
        }
    </style>
</head>
<body>
    <!-- ìƒë‹¨ íƒ€ì´í‹€ ë°•ìŠ¤ -->
    <div class="title-box">
        <h1><i class="fas fa-map-marked-alt"></i> ìƒí•˜ì´ ì—¬í–‰ ì§€ë„</h1>
    </div>

    <!-- ë²”ë¡€ ë°•ìŠ¤ -->
    <div class="legend-box">
        <h3><i class="fas fa-list"></i> ë²”ë¡€</h3>
        <ul>
            <li>
                <div class="marker-icon tourism-marker">
                    <i class="fas fa-camera"></i>
                </div>
                ê´€ê´‘ì§€
            </li>
            <li>
                <div class="marker-icon restaurant-marker">
                    <i class="fas fa-utensils"></i>
                </div>
                ìŒì‹ì 
            </li>
            <li>
                <div class="marker-icon airport-marker">
                    <i class="fas fa-plane"></i>
                </div>
                ê³µí•­
            </li>
            <li>
                <div class="marker-icon accommodation-marker">
                    <i class="fas fa-bed"></i>
                </div>
                ìˆ™ì†Œ
            </li>
        </ul>
    </div>

    <!-- ì¥ì†Œ ì •ë³´ ë°•ìŠ¤ -->
    <div class="info-box" id="place-details">
        <button class="close-btn" onclick="closeInfoBox()">
            <i class="fas fa-times"></i>
        </button>
        <div id="place-content">
            <!-- ì¥ì†Œ ì •ë³´ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
        </div>
    </div>

    <!-- ì „ì²´ í™”ë©´ ì§€ë„ -->
    <div id="map"></div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
        // ìƒí•˜ì´ ë°ì´í„°
        const shanghaiData = {
            "places": [
                {
                    "name": "ìƒí•˜ì´ í‘¸ë™ êµ­ì œê³µí•­ (PVG)",
                    "type": "airport",
                    "latitude": 31.1443,
                    "longitude": 121.8058,
                    "feature": "ìƒí•˜ì´ì˜ ì£¼ìš” êµ­ì œ ê´€ë¬¸",
                    "ì£¼ì†Œ": "Shanghai, Pudong, China",
                    "ì¶”ì²œ_ë°©ë¬¸ì¼ì°¨": "ë„ì°©/ì¶œë°œ",
                    "í‰ì ": 4.0,
                    "ì˜ì—…ì‹œê°„": "24ì‹œê°„",
                    "ì „í™”ë²ˆí˜¸": "+86 21 96990"
                },
                {
                    "name": "ìƒí•˜ì´ ì¸ë¯¼ë¡œ 839í˜¸ ìˆ™ì†Œ 1ì•ˆ",
                    "type": "accommodation",
                    "latitude": 31.2275837,
                    "longitude": 121.4847172,
                    "feature": "ìƒí•˜ì´ ì‹œë‚´ ì¤‘ì‹¬ í™©í‘¸êµ¬ ìœ„ì¹˜, ì ‘ê·¼ì„± ì¢‹ìŒ",
                    "ì£¼ì†Œ": "No. 839 Renmin Road, Huangpu District, Shanghai, China",
                    "ì¶”ì²œ_ë°©ë¬¸ì¼ì°¨": "ë§¤ì¼",
                    "í‰ì ": 4.5,
                    "ì˜ì—…ì‹œê°„": "ì²´í¬ì¸/ì•„ì›ƒ ê¸°ì¤€",
                    "ì „í™”ë²ˆí˜¸": "í™•ì¸ í•„ìš”"
                },
                {
                    "name": "ì™€ì´íƒ„ (The Bund)",
                    "type": "ê´€ê´‘ì§€",
                    "latitude": 31.2386,
                    "longitude": 121.4903,
                    "feature": "í™©í‘¸ê°•ì„ ë”°ë¼ í¼ì³ì§„ ìƒí•˜ì´ì˜ ìƒì§•ì ì¸ ìŠ¤ì¹´ì´ë¼ì¸ê³¼ ìœ ëŸ½í’ ê±´ì¶•ë¬¼ì´ ì–´ìš°ëŸ¬ì§„ ì•¼ê²½ ëª…ì†Œ",
                    "ì£¼ì†Œ": "Zhongshan East 1st Rd, Huangpu, Shanghai, China",
                    "ì¶”ì²œ_ë°©ë¬¸ì¼ì°¨": "1ì¼ì°¨",
                    "í‰ì ": 4.7,
                    "ì˜ì—…ì‹œê°„": "24ì‹œê°„",
                    "ì „í™”ë²ˆí˜¸": "ì—†ìŒ"
                },
                {
                    "name": "ë™ë°©ëª…ì£¼ íƒ€ì›Œ (Oriental Pearl Tower)",
                    "type": "ê´€ê´‘ì§€",
                    "latitude": 31.2418,
                    "longitude": 121.4951,
                    "feature": "ìƒí•˜ì´ì˜ ëœë“œë§ˆí¬ë¡œ, 360ë„ ì „ë§ëŒ€ì™€ íˆ¬ëª… ìŠ¤ì¹´ì´ì›Œí¬ê°€ ì¸ê¸°",
                    "ì£¼ì†Œ": "1 Century Ave, Pudong, Shanghai, China",
                    "ì¶”ì²œ_ë°©ë¬¸ì¼ì°¨": "1ì¼ì°¨",
                    "í‰ì ": 4.5,
                    "ì˜ì—…ì‹œê°„": "08:00-22:00",
                    "ì „í™”ë²ˆí˜¸": "+86 21 5879 1888"
                },
                {
                    "name": "ì˜ˆì› (Yu Garden)",
                    "type": "ê´€ê´‘ì§€",
                    "latitude": 31.2278,
                    "longitude": 121.4925,
                    "feature": "ëª…ë‚˜ë¼ ì‹œëŒ€ì˜ ê³ ì „ ì •ì›ìœ¼ë¡œ, ì „í†µ ì¤‘êµ­ ê±´ì¶•ê³¼ ì •ì›ì„ ê°ìƒ ê°€ëŠ¥",
                    "ì£¼ì†Œ": "279 Yuyuan Old St, Huangpu, Shanghai, China",
                    "ì¶”ì²œ_ë°©ë¬¸ì¼ì°¨": "2ì¼ì°¨",
                    "í‰ì ": 4.6,
                    "ì˜ì—…ì‹œê°„": "08:30-17:00",
                    "ì „í™”ë²ˆí˜¸": "+86 21 6326 0830"
                },
                {
                    "name": "ìƒí•˜ì´ íƒ€ì›Œ (Shanghai Tower)",
                    "type": "ê´€ê´‘ì§€",
                    "latitude": 31.2356,
                    "longitude": 121.5010,
                    "feature": "ì„¸ê³„ì—ì„œ ë‘ ë²ˆì§¸ë¡œ ë†’ì€ ë§ˆì²œë£¨ë¡œ, 118ì¸µ ì „ë§ëŒ€ì—ì„œ ìƒí•˜ì´ ì „ê²½ ì¡°ë§",
                    "ì£¼ì†Œ": "501 Yincheng Middle Rd, Pudong, Shanghai, China",
                    "ì¶”ì²œ_ë°©ë¬¸ì¼ì°¨": "1ì¼ì°¨",
                    "í‰ì ": 4.6,
                    "ì˜ì—…ì‹œê°„": "08:30-22:00",
                    "ì „í™”ë²ˆí˜¸": "+86 21 2065 6999"
                },
                {
                    "name": "ë‚œì§•ë£¨ ë³´í–‰ì ê±°ë¦¬ (Nanjing Road Pedestrian Street)",
                    "type": "ê´€ê´‘ì§€",
                    "latitude": 31.2349,
                    "longitude": 121.4750,
                    "feature": "ìƒí•˜ì´ ìµœëŒ€ì˜ ì‡¼í•‘ ê±°ë¦¬ë¡œ, í˜„ëŒ€ì™€ ì „í†µì´ ê³µì¡´í•˜ëŠ” ë¶„ìœ„ê¸°",
                    "ì£¼ì†Œ": "Nanjing Rd Pedestrian St, Huangpu, Shanghai, China",
                    "ì¶”ì²œ_ë°©ë¬¸ì¼ì°¨": "2ì¼ì°¨",
                    "í‰ì ": 4.4,
                    "ì˜ì—…ì‹œê°„": "24ì‹œê°„",
                    "ì „í™”ë²ˆí˜¸": "ì—†ìŒ"
                },
                {
                    "name": "ì‹ ì²œì§€ (Xintiandi)",
                    "type": "ê´€ê´‘ì§€",
                    "latitude": 31.2234,
                    "longitude": 121.4708,
                    "feature": "1920ë…„ëŒ€ ì„ì¿ ë¨¼ ê±´ì¶•ì„ í˜„ëŒ€ì ìœ¼ë¡œ ì¬í˜„í•œ íŠ¸ë Œë””í•œ ê±°ë¦¬",
                    "ì£¼ì†Œ": "Lane 181, Taicang Rd, Huangpu, Shanghai, China",
                    "ì¶”ì²œ_ë°©ë¬¸ì¼ì°¨": "2ì¼ì°¨",
                    "í‰ì ": 4.5,
                    "ì˜ì—…ì‹œê°„": "24ì‹œê°„",
                    "ì „í™”ë²ˆí˜¸": "ì—†ìŒ"
                },
                {
                    "name": "ëŒ€í•œë¯¼êµ­ ì„ì‹œì •ë¶€ (Provisional Government of the Republic of Korea)",
                    "type": "ê´€ê´‘ì§€",
                    "latitude": 31.2217,
                    "longitude": 121.4684,
                    "feature": "í•œêµ­ ë…ë¦½ìš´ë™ì˜ ì—­ì‚¬ì  ì¥ì†Œë¡œ, ìƒí•˜ì´ ë°©ë¬¸ ì‹œ í•„ìˆ˜ ì½”ìŠ¤",
                    "ì£¼ì†Œ": "306 Madang Rd, Huangpu, Shanghai, China",
                    "ì¶”ì²œ_ë°©ë¬¸ì¼ì°¨": "3ì¼ì°¨",
                    "í‰ì ": 4.3,
                    "ì˜ì—…ì‹œê°„": "09:00-17:00",
                    "ì „í™”ë²ˆí˜¸": "+86 21 5382 6505"
                },
                {
                    "name": "í•˜ì´ë””ë¼ì˜¤ í› ê¶ˆ (Hai Di Lao Hot Pot)",
                    "type": "ìŒì‹ì ",
                    "latitude": 31.2356,
                    "longitude": 121.4790,
                    "feature": "í•œêµ­ì¸ì—ê²Œë„ ìµìˆ™í•œ ì¤‘êµ­ì‹ ìƒ¤ë¸Œìƒ¤ë¸Œ í› ê¶ˆ ì²´ì¸ì ",
                    "ì£¼ì†Œ": "6F, 299 Nanjing East Rd, Huangpu, Shanghai, China",
                    "ì¶”ì²œ_ë°©ë¬¸ì¼ì°¨": "ë§¤ì¼",
                    "í‰ì ": 4.6,
                    "ì˜ì—…ì‹œê°„": "10:00-02:00",
                    "ì „í™”ë²ˆí˜¸": "+86 21 6328 2298"
                },
                {
                    "name": "ì™€ì´í¬ì§€ì•„ (Grandma's Home)",
                    "type": "ìŒì‹ì ",
                    "latitude": 31.2451,
                    "longitude": 121.4710,
                    "feature": "í•­ì €ìš° ìš”ë¦¬ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ê°€ì„±ë¹„ ì¢‹ì€ ì¤‘ì‹ ë ˆìŠ¤í† ë‘",
                    "ì£¼ì†Œ": "7F, Joy City, 166 Xizang North Rd, Jing'an, Shanghai, China",
                    "ì¶”ì²œ_ë°©ë¬¸ì¼ì°¨": "ë§¤ì¼",
                    "í‰ì ": 4.4,
                    "ì˜ì—…ì‹œê°„": "10:00-22:00",
                    "ì „í™”ë²ˆí˜¸": "+86 21 6358 3999"
                },
                {
                    "name": "ë”˜íƒ€ì´í‘ (Din Tai Fung)",
                    "type": "ìŒì‹ì ",
                    "latitude": 31.2368,
                    "longitude": 121.5027,
                    "feature": "ì„¸ê³„ì ìœ¼ë¡œ ìœ ëª…í•œ ìƒ¤ì˜¤ë¡±ë°”ì˜¤ ì²´ì¸ì ",
                    "ì£¼ì†Œ": "2F, Shanghai World Financial Center, 100 Century Ave, Pudong, Shanghai, China",
                    "ì¶”ì²œ_ë°©ë¬¸ì¼ì°¨": "ë§¤ì¼",
                    "í‰ì ": 4.6,
                    "ì˜ì—…ì‹œê°„": "10:00-22:00",
                    "ì „í™”ë²ˆí˜¸": "+86 21 6877 6888"
                }
            ]
        };

        let map;
        let markers = L.featureGroup();

        document.addEventListener('DOMContentLoaded', () => {
            initializeMap();
        });

        function initializeMap() {
            // ì§€ë„ ì´ˆê¸°í™”
            map = L.map('map').setView([31.2304, 121.4737], 12);

            // ì§€ë„ íƒ€ì¼ ë ˆì´ì–´ ì¶”ê°€
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(map);

            // ë§ˆì»¤ ë ˆì´ì–´ ê·¸ë£¹ì„ ì§€ë„ì— ì¶”ê°€
            markers.addTo(map);

            // ë§ˆì»¤ í‘œì‹œ
            displayMarkers(shanghaiData.places);
        }

        function displayMarkers(places) {
            markers.clearLayers();

            places.forEach(place => {
                const marker = L.marker([place.latitude, place.longitude], {
                    icon: createCustomIcon(place.type)
                }).addTo(markers);

                marker.bindTooltip(place.name, {
                    permanent: false,
                    direction: 'top',
                    offset: [0, -10]
                });

                marker.on('click', () => {
                    displayPlaceDetails(place);
                    map.flyTo([place.latitude, place.longitude], 15);
                });
            });

            // ëª¨ë“  ë§ˆì»¤ê°€ ë³´ì´ë„ë¡ ì§€ë„ ë·° ì¡°ì •
            if (markers.getLayers().length > 0) {
                map.fitBounds(markers.getBounds().pad(0.1));
            }
        }

        function createCustomIcon(type) {
            let iconClass, bgClass;

            switch (type) {
                case 'ê´€ê´‘ì§€':
                    iconClass = 'fas fa-camera';
                    bgClass = 'tourism-bg';
                    break;
                case 'ìŒì‹ì ':
                    iconClass = 'fas fa-utensils';
                    bgClass = 'restaurant-bg';
                    break;
                case 'airport':
                    iconClass = 'fas fa-plane';
                    bgClass = 'airport-bg';
                    break;
                case 'accommodation':
                    iconClass = 'fas fa-bed';
                    bgClass = 'accommodation-bg';
                    break;
                default:
                    iconClass = 'fas fa-map-marker-alt';
                    bgClass = 'tourism-bg';
            }

            return L.divIcon({
                className: 'custom-marker-icon',
                html: `<div class="marker-content ${bgClass}">
                         <i class="${iconClass}"></i>
                       </div>`,
                iconSize: [35, 35],
                iconAnchor: [17, 17],
                tooltipAnchor: [0, -20]
            });
        }

        function displayPlaceDetails(place) {
            const infoBox = document.getElementById('place-details');
            const placeContent = document.getElementById('place-content');
            
            let detailsHtml = `
                <div class="place-type-badge type-${place.type}">
                    ${getTypeIcon(place.type)} ${getTypeDisplayName(place.type)}
                </div>
                <h3><i class="fas fa-map-marker-alt"></i> ${place.name}</h3>
                <p><strong>ğŸ¯ íŠ¹ì§•:</strong> ${place.feature || 'ì •ë³´ ì—†ìŒ'}</p>
            `;
            
            if (place.ì£¼ì†Œ) {
                detailsHtml += `<p><strong>ğŸ“ ì£¼ì†Œ:</strong> ${place.ì£¼ì†Œ}</p>`;
            }
            
            if (place.ì¶”ì²œ_ë°©ë¬¸ì¼ì°¨) {
                detailsHtml += `<p><strong>ğŸ“… ì¶”ì²œ:</strong> ${place.ì¶”ì²œ_ë°©ë¬¸ì¼ì°¨}</p>`;
            }
            
            if (place.í‰ì ) {
                const stars = 'â˜…'.repeat(Math.floor(place.í‰ì )) + 'â˜†'.repeat(5 - Math.floor(place.í‰ì ));
                detailsHtml += `<p><strong>â­ í‰ì :</strong> ${place.í‰ì }/5 <span class="rating-stars">${stars}</span></p>`;
            }
            
            if (place.ì˜ì—…ì‹œê°„) {
                detailsHtml += `<p><strong>ğŸ•’ ì˜ì—…:</strong> ${place.ì˜ì—…ì‹œê°„}</p>`;
            }
            
            if (place.ì „í™”ë²ˆí˜¸ && place.ì „í™”ë²ˆí˜¸ !== "ì—†ìŒ" && place.ì „í™”ë²ˆí˜¸ !== "í™•ì¸ í•„ìš”") {
                detailsHtml += `<p><strong>ğŸ“ ì—°ë½:</strong> ${place.ì „í™”ë²ˆí˜¸}</p>`;
            }

            placeContent.innerHTML = detailsHtml;
            infoBox.classList.add('show');
        }

        function closeInfoBox() {
            const infoBox = document.getElementById('place-details');
            infoBox.classList.remove('show');
        }

        function getTypeIcon(type) {
            switch (type) {
                case 'ê´€ê´‘ì§€': return 'ğŸ“·';
                case 'ìŒì‹ì ': return 'ğŸ´';
                case 'airport': return 'âœˆï¸';
                case 'accommodation': return 'ğŸ¨';
                default: return 'ğŸ“';
            }
        }

        function getTypeDisplayName(type) {
            switch (type) {
                case 'ê´€ê´‘ì§€': return 'ê´€ê´‘ì§€';
                case 'ìŒì‹ì ': return 'ìŒì‹ì ';
                case 'airport': return 'ê³µí•­';
                case 'accommodation': return 'ìˆ™ì†Œ';
                default: return 'ê¸°íƒ€';
            }
        }

        // ESC í‚¤ë¡œ ì •ë³´ ë°•ìŠ¤ ë‹«ê¸°
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeInfoBox();
            }
        });

        // ì§€ë„ í´ë¦­ ì‹œ ì •ë³´ ë°•ìŠ¤ ë‹«ê¸°
        map.on('click', (e) => {
            // ë§ˆì»¤ê°€ ì•„ë‹Œ ì§€ë„ ì˜ì—­ì„ í´ë¦­í–ˆì„ ë•Œë§Œ ë‹«ê¸°
            if (e.originalEvent.target === e.originalEvent.currentTarget) {
                closeInfoBox();
            }
        });
    </script>
</body>
</html>

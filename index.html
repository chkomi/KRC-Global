<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìƒí•˜ì´ 11ì›” ì—¬í–‰ ê³„íš</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f7f6;
            color: #333;
            height: 100vh;
            overflow: hidden;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-touch-callout: none;
            -webkit-tap-highlight-color: transparent;
        }

        function setupMapEvents() {
            let longPressTimer;
            let touchStarted = false;
            let touchMoved = false;
            let touchStartTime;
            let touchStartPos = { x: 0, y: 0 };
            let touchLatLng = null;

            // í„°ì¹˜ ì‹œì‘
            map.on('mousedown', function(e) {
                if (e.originalEvent.button !== 0) return; // ë§ˆìš°ìŠ¤ ì¢Œí´ë¦­ë§Œ
                startLongPress(e, e.latlng);
            });

            map.on('touchstart', function(e) {
                // ê¸°ë³¸ ë™ì‘ ë°©ì§€ (í…ìŠ¤íŠ¸ ì„ íƒ, ì»¨í…ìŠ¤íŠ¸ ë©”ë‰´ ë“±)
                e.originalEvent.preventDefault();
                startLongPress(e, e.latlng);
            });

            function startLongPress(e, latlng) {
                touchStarted = true;
                touchMoved = false;
                isLongPress = false;
                touchStartTime = Date.now();
                touchLatLng = latlng;
                
                if (e.originalEvent.touches) {
                    touchStartPos.x = e.originalEvent.touches[0].clientX;
                    touchStartPos.y = e.originalEvent.touches[0].clientY;
                } else {
                    touchStartPos.x = e.originalEvent.clientX;
                    touchStartPos.y = e.originalEvent.clientY;
                }

                // 500ms í›„ ê¸¸ê²Œ ëˆ„ë¥´ê¸°ë¡œ ì¸ì‹
                longPressTimer = setTimeout(function() {
                    if (touchStarted && !touchMoved && touchLatLng) {
                        isLongPress = true;
                        showCoordinates(touchLatLng.lat, touchLatLng.lng);
                        
                        // í–…í‹± í”¼ë“œë°±
                        if (navigator.vibrate) {
                            navigator.vibrate(50);
                        }
                    }
                }, 500);
            }

            // í„°ì¹˜ ì´ë™
            map.on('mousemove', function(e) {
                checkTouchMove(e);
            });

            map.on('touchmove', function(e) {
                e.originalEvent.preventDefault();
                checkTouchMove(e);
            });

            function checkTouchMove(e) {
                if (!touchStarted) return;

                let currentPos = { x: 0, y: 0 };
                if (e.originalEvent.touches) {
                    currentPos.x = e.originalEvent.touches[0].clientX;
                    currentPos.y = e.originalEvent.touches[0].clientY;
                } else {
                    currentPos.x = e.originalEvent.clientX;
                    currentPos.y = e.originalEvent.clientY;
                }

                const distance = Math.sqrt(
                    Math.pow(currentPos.x - touchStartPos.x, 2) + 
                    Math.pow(currentPos.y - touchStartPos.y, 2)
                );

                // 5í”½ì…€ ì´ìƒ ì›€ì§ì´ë©´ ì´ë™ìœ¼ë¡œ ê°„ì£¼
                if (distance > 5) {
                    touchMoved = true;
                    clearTimeout(longPressTimer);
                }
            }

            // í„°ì¹˜ ë
            map.on('mouseup', function(e) {
                endLongPress();
            });

            map.on('touchend', function(e) {
                e.originalEvent.preventDefault();
                endLongPress();
            });

            map.on('touchcancel', function(e) {
                e.originalEvent.preventDefault();
                endLongPress();
            });

            function endLongPress() {
                clearTimeout(longPressTimer);
                touchStarted = false;
                touchMoved = false;
                touchLatLng = null;
            }

            // PCì—ì„œ ìš°í´ë¦­ìœ¼ë¡œë„ ì¢Œí‘œ í‘œì‹œ
            map.on('contextmenu', function(e) {
                L.DomEvent.preventDefault(e);
                showCoordinates(e.latlng.lat, e.latlng.lng);
            });
        }

        function showCoordinates(lat, lng) {
            document.getElementById('coord-lat').textContent = lat.toFixed(6);
            document.getElementById('coord-lng').textContent = lng.toFixed(6);
            
            // ë‹¤ì–‘í•œ ì§€ë„ ì„œë¹„ìŠ¤ ë§í¬ ìƒì„±
            const googleMapsUrl = `https://maps.google.com/?q=${lat},${lng}`;
            const amapUrl = `https://uri.amap.com/marker?position=${lng},${lat}&name=ì„ íƒëœìœ„ì¹˜&src=mypage`;
            
            // ë§í¬ ì¶”ê°€
            document.getElementById('google-maps-link').href = googleMapsUrl;
            document.getElementById('amap-link').href = amapUrl;
            
            document.getElementById('coordinate-overlay').style.display = 'block';
            document.getElementById('coordinate-popup').style.display = 'block';
        }

        function closeCoordinatePopup() {
            document.getElementById('coordinate-overlay').style.display = 'none';
            document.getElementById('coordinate-popup').style.display = 'none';
        }

        function copyCoordinates() {
            const lat = document.getElementById('coord-lat').textContent;
            const lng = document.getElementById('coord-lng').textContent;
            const coordinates = `${lat}, ${lng}`;
            
            // í´ë¦½ë³´ë“œì— ë³µì‚¬
            if (navigator.clipboard) {
                navigator.clipboard.writeText(coordinates).then(function() {
                    // ë³µì‚¬ ì„±ê³µ í”¼ë“œë°±
                    const copyBtn = document.querySelector('.coord-btn.copy');
                    const originalText = copyBtn.innerHTML;
                    copyBtn.innerHTML = 'âœ… ë³µì‚¬ë¨!';
                    copyBtn.style.backgroundColor = '#27ae60';
                    
                    setTimeout(function() {
                        copyBtn.innerHTML = originalText;
                        copyBtn.style.backgroundColor = '#3498db';
                    }, 1500);
                }).catch(function() {
                    // ë³µì‚¬ ì‹¤íŒ¨ì‹œ ì•Œë¦¼
                    alert(`ì¢Œí‘œ: ${coordinates}\n(ìˆ˜ë™ìœ¼ë¡œ ë³µì‚¬í•´ì£¼ì„¸ìš”)`);
                });
            } else {
                // êµ¬í˜• ë¸Œë¼ìš°ì € ì§€ì›
                alert(`ì¢Œí‘œ: ${coordinates}\n(ìˆ˜ë™ìœ¼ë¡œ ë³µì‚¬í•´ì£¼ì„¸ìš”)`);
            }
        }

        /* ì§€ë„ íƒ€ì¼ ì„ íƒ ì»¨íŠ¸ë¡¤ */
        .map-tile-control {
            position: absolute;
            top: 15px;
            left: 15px;
            background: rgba(255, 255, 255, 0.95);
            padding: 10px;
            border-radius: 8px;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .map-tile-control h4 {
            margin: 0 0 8px 0;
            color: #2c3e50;
            font-size: 0.9em;
            font-weight: 600;
        }

        .tile-option {
            display: block;
            margin: 4px 0;
            font-size: 0.8em;
            cursor: pointer;
            padding: 3px 6px;
            border-radius: 4px;
            transition: background-color 0.2s;
            user-select: none;
        }

        .tile-option input[type="radio"] {
            display: none;
        }

        .tile-option:hover {
            background-color: #f8f9fa;
        }

        .tile-option.active {
            background-color: #3498db;
            color: white;
        }

        /* ìƒë‹¨ íƒ€ì´í‹€ ë°•ìŠ¤ */
        .title-box {
            position: absolute;
            top: 15px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(44, 62, 80, 0.95);
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            z-index: 1000;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .title-box h1 {
            margin: 0;
            font-size: 1.4em;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* ì „ì²´ í™”ë©´ ì§€ë„ */
        #map {
            width: 100vw;
            height: 100vh;
            z-index: 1;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-touch-callout: none;
        }

        /* ë²”ë¡€ ë°•ìŠ¤ */
        .legend-box {
            position: absolute;
            top: 80px;
            right: 15px;
            background: rgba(255, 255, 255, 0.95);
            padding: 15px;
            border-radius: 12px;
            z-index: 1000;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 0, 0, 0.1);
            max-width: 200px;
        }

        .legend-box h3 {
            margin: 0 0 12px 0;
            color: #2c3e50;
            font-size: 1em;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .legend-box ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .legend-box li {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            font-size: 0.85em;
        }

        .marker-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            margin-right: 8px;
            color: white;
            font-size: 8px;
            font-weight: bold;
        }

        .tourism-marker { background-color: #e74c3c; }
        .restaurant-marker { background-color: #27ae60; }
        .airport-marker { background-color: #9b59b6; }
        .accommodation-marker { background-color: #3498db; }
        .special-location-marker { background-color: #f39c12; }

        /* íŠ¹ë³„ ìœ„ì¹˜ ë¼ë²¨ ìŠ¤íƒ€ì¼ */
        .special-location-label {
            background: rgba(243, 156, 18, 0.95) !important;
            color: white !important;
            border: 1px solid rgba(0, 0, 0, 0.2) !important;
            font-weight: 700 !important;
        }

        .special-location-label:before {
            border-right-color: rgba(243, 156, 18, 0.95) !important;
        }

        /* ì¥ì†Œ ì •ë³´ ë°•ìŠ¤ */
        .info-box {
            position: absolute;
            bottom: 15px;
            left: 15px;
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 12px;
            z-index: 1000;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 0, 0, 0.1);
            max-width: 350px;
            max-height: 300px;
            overflow-y: auto;
            display: none;
        }

        .info-box.show {
            display: block;
            animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .info-box h3 {
            margin: 0 0 12px 0;
            color: #2c3e50;
            font-size: 1.1em;
            border-left: 4px solid #3498db;
            padding-left: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .info-box p {
            margin: 6px 0;
            font-size: 0.9em;
            line-height: 1.4;
        }

        .info-box strong {
            color: #3498db;
            font-weight: 600;
        }

        .place-type-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 15px;
            color: white;
            font-size: 0.75em;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .type-attractions { background-color: #e74c3c; }
        .type-restaurants { background-color: #27ae60; }
        .type-airports { background-color: #9b59b6; }
        .type-hotels { background-color: #3498db; }

        .rating-stars {
            color: #f39c12;
            margin-left: 5px;
            font-size: 0.9em;
        }

        .info-box ul {
            margin: 8px 0;
            padding-left: 20px;
        }

        .info-box li {
            margin: 4px 0;
            font-size: 0.85em;
            color: #555;
        }

        .close-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.2em;
            color: #7f8c8d;
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            transition: all 0.2s;
        }

        .close-btn:hover {
            background-color: #ecf0f1;
            color: #2c3e50;
        }

        /* ì»¤ìŠ¤í…€ ë§ˆì»¤ ìŠ¤íƒ€ì¼ */
        .custom-marker-icon {
            background: transparent;
            border: none;
            border-radius: 50%;
        }

        .marker-content {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            color: white;
            font-size: 10px;
            font-weight: bold;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
            border: 2px solid white;
            transition: transform 0.2s;
        }

        .marker-content:hover {
            transform: scale(1.1);
        }

        .tourism-bg { background-color: #e74c3c; }
        .restaurant-bg { background-color: #27ae60; }
        .airport-bg { background-color: #9b59b6; }
        .accommodation-bg { background-color: #3498db; }
        .special-location-bg { background-color: #f39c12; }

        /* íŠ¹ë³„ ìœ„ì¹˜ ë§ˆì»¤ ìŠ¤íƒ€ì¼ */
        .special-marker-content {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            color: white;
            font-size: 20px;
            font-weight: bold;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
            border: 3px solid white;
            transition: transform 0.2s;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4), 0 0 0 0 rgba(243, 156, 18, 0.7);
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4), 0 0 0 8px rgba(243, 156, 18, 0.3);
            }
            100% {
                transform: scale(1);
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4), 0 0 0 0 rgba(243, 156, 18, 0);
            }
        }

        /* Leaflet íˆ´íŒ ìŠ¤íƒ€ì¼ */
        .leaflet-tooltip {
            padding: 6px 12px !important;
            background-color: rgba(0, 0, 0, 0.8) !important;
            color: white !important;
            border: none !important;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important;
            font-weight: bold;
            font-size: 0.9em;
            white-space: nowrap;
            pointer-events: none;
            border-radius: 4px;
        }

        .leaflet-tooltip.leaflet-tooltip-bottom:before {
            border-top-color: rgba(0, 0, 0, 0.8) !important;
        }

        /* ì¢Œí‘œ í‘œì‹œ íŒì—… ìŠ¤íƒ€ì¼ */
        .coordinate-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.98);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            z-index: 2000;
            min-width: 300px;
            max-width: 90vw;
            text-align: center;
            border: 1px solid rgba(0, 0, 0, 0.1);
            display: none;
        }

        .coordinate-popup h3 {
            margin: 0 0 15px 0;
            color: #2c3e50;
            font-size: 1.1em;
        }

        .coordinate-info {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 8px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            color: #2c3e50;
        }

        .coordinate-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            justify-content: center;
        }

        .coord-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.2s;
        }

        .coord-btn.copy {
            background-color: #3498db;
            color: white;
        }

        .coord-btn.copy:hover {
            background-color: #2980b9;
        }

        .coord-btn.close {
            background-color: #95a5a6;
            color: white;
        }

        .coord-btn.close:hover {
            background-color: #7f8c8d;
        }

        .coordinate-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1999;
            display: none;
        }

        /* ì¥ì†Œ ë¼ë²¨ ìŠ¤íƒ€ì¼ */
        .place-label {
            background: rgba(255, 255, 255, 0.95) !important;
            color: #2c3e50 !important;
            border: 1px solid rgba(0, 0, 0, 0.2) !important;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2) !important;
            font-weight: 600 !important;
            font-size: 0.8em !important;
            padding: 4px 8px !important;
            border-radius: 12px !important;
            white-space: nowrap !important;
            pointer-events: none !important;
        }

        .place-label:before {
            border-right-color: rgba(255, 255, 255, 0.95) !important;
        }

        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 768px) {
            .title-box {
                top: 10px;
                left: 10px;
                right: 10px;
                transform: none;
                padding: 10px 16px;
            }

            .title-box h1 {
                font-size: 1.2em;
                text-align: center;
            }

            .legend-box {
                top: 70px;
                right: 10px;
                padding: 12px;
                max-width: 160px;
            }

            .legend-box h3 {
                font-size: 0.9em;
            }

            .legend-box li {
                font-size: 0.8em;
            }

            .info-box {
                bottom: 10px;
                left: 10px;
                right: 10px;
                max-width: none;
                padding: 15px;
            }

            /* ëª¨ë°”ì¼ì—ì„œ ë¼ë²¨ í¬ê¸° ì¡°ì • */
            .place-label {
                font-size: 0.7em !important;
                padding: 3px 6px !important;
            }

            /* ëª¨ë°”ì¼ì—ì„œ ì§€ë„ íƒ€ì¼ ì»¨íŠ¸ë¡¤ ì¡°ì • */
            .map-tile-control {
                top: 10px;
                left: 10px;
                padding: 8px;
                max-width: 120px;
            }

            .map-tile-control h4 {
                font-size: 0.8em;
                margin-bottom: 6px;
            }

            .tile-option {
                font-size: 0.75em;
                margin: 2px 0;
                padding: 2px 4px;
            }

            /* ëª¨ë°”ì¼ì—ì„œ ì¢Œí‘œ íŒì—… ì¡°ì • */
            .coordinate-popup {
                width: 90%;
                max-width: 300px;
                min-width: unset;
                padding: 15px;
            }

            .coordinate-actions {
                flex-direction: column;
                align-items: center;
            }

            .coord-btn {
                width: 100%;
                margin: 3px 0;
            }
        }

        /* ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ */
        .info-box::-webkit-scrollbar {
            width: 6px;
        }

        .info-box::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 3px;
        }

        .info-box::-webkit-scrollbar-thumb {
            background: #bdc3c7;
            border-radius: 3px;
        }

        .info-box::-webkit-scrollbar-thumb:hover {
            background: #95a5a6;
        }
    </style>
</head>
<body>
    <!-- ì§€ë„ íƒ€ì¼ ì„ íƒ ì»¨íŠ¸ë¡¤ -->
    <div class="map-tile-control">
        <h4>ğŸ—ºï¸ ì§€ë„ ì¢…ë¥˜</h4>
        <label class="tile-option active" id="satellite-option">
            <input type="radio" name="tile-layer" value="satellite" checked>
            ğŸ›°ï¸ ìœ„ì„±
        </label>
        <label class="tile-option" id="street-option">
            <input type="radio" name="tile-layer" value="street">
            ğŸ›£ï¸ ë„ë¡œ
        </label>
        <label class="tile-option" id="terrain-option">
            <input type="radio" name="tile-layer" value="terrain">
            ğŸ”ï¸ ì§€í˜•
        </label>
        <label class="tile-option" id="google-style-option">
            <input type="radio" name="tile-layer" value="google-style">
            ğŸ‡«ğŸ‡· í”„ë‘ìŠ¤OSM
        </label>
        <label class="tile-option" id="cartodb-option">
            <input type="radio" name="tile-layer" value="cartodb">
            ğŸ¨ ì‹¬í”Œ
        </label>
        <label class="tile-option" id="dark-option">
            <input type="radio" name="tile-layer" value="dark">
            ğŸŒ™ ë‹¤í¬
        </label>
    </div>

    <!-- ìƒë‹¨ íƒ€ì´í‹€ ë°•ìŠ¤ -->
    <div class="title-box">
        <h1><i class="fas fa-map-marked-alt"></i> ìƒí•˜ì´ ì—¬í–‰ ì§€ë„</h1>
    </div>

    <!-- ë²”ë¡€ ë°•ìŠ¤ -->
    <div class="legend-box">
        <h3><i class="fas fa-list"></i> ë²”ë¡€</h3>
        <ul>
            <li>
                <div class="marker-icon tourism-marker">
                    <i class="fas fa-camera"></i>
                </div>
                ê´€ê´‘ì§€
            </li>
            <li>
                <div class="marker-icon restaurant-marker">
                    <i class="fas fa-utensils"></i>
                </div>
                ìŒì‹ì 
            </li>
            <li>
                <div class="marker-icon airport-marker">
                    <i class="fas fa-plane"></i>
                </div>
                ê³µí•­
            </li>
            <li>
                <div class="marker-icon accommodation-marker">
                    <i class="fas fa-bed"></i>
                </div>
                í˜¸í…”
            </li>
            <li>
                <div class="marker-icon special-location-marker">
                    <i class="fas fa-star"></i>
                </div>
                íŠ¹ë³„ ìœ„ì¹˜
            </li>
        </ul>
        <div style="margin-top: 12px; padding-top: 10px; border-top: 1px dashed #ddd; font-size: 0.75em; color: #666;">
            <i class="fas fa-info-circle"></i> ì§€ë„ë¥¼ 0.5ì´ˆê°„ ê¸¸ê²Œ ëˆ„ë¥´ë©´ ì¢Œí‘œ í™•ì¸<br>
            <small style="color: #999;">â€» êµ¬ê¸€ì§€ë„ì™€ OSMê°„ ì•½ê°„ì˜ ì˜¤ì°¨ ìˆì„ ìˆ˜ ìˆìŒ</small>
        </div>
    </div>

    <!-- ì¥ì†Œ ì •ë³´ ë°•ìŠ¤ -->
    <div class="info-box" id="place-details">
        <button class="close-btn" onclick="closeInfoBox()">
            <i class="fas fa-times"></i>
        </button>
        <div id="place-content">
            <!-- ì¥ì†Œ ì •ë³´ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
        </div>
    </div>

    <!-- ì¢Œí‘œ í‘œì‹œ íŒì—… -->
    <div class="coordinate-overlay" id="coordinate-overlay"></div>
    <div class="coordinate-popup" id="coordinate-popup">
        <h3>ğŸ“ ìœ„ì¹˜ ì¢Œí‘œ</h3>
        <div class="coordinate-info">
            <div><strong>ìœ„ë„:</strong> <span id="coord-lat"></span></div>
            <div><strong>ê²½ë„:</strong> <span id="coord-lng"></span></div>
        </div>
        <div style="margin: 10px 0; padding: 10px; background: #f8f9fa; border-radius: 6px; font-size: 0.85em;">
            <strong>ğŸ—ºï¸ ë‹¤ë¥¸ ì§€ë„ì—ì„œ í™•ì¸:</strong><br>
            <a id="google-maps-link" href="#" target="_blank" style="color: #4285f4; text-decoration: none; margin-right: 15px;">
                ğŸ“ êµ¬ê¸€ ì§€ë„ë¡œ ë³´ê¸°
            </a>
            <a id="amap-link" href="#" target="_blank" style="color: #00a6fb; text-decoration: none;">
                ğŸ—ºï¸ ê°€ì˜¤ë” ì§€ë„ë¡œ ë³´ê¸°
            </a>
        </div>
        <div class="coordinate-actions">
            <button class="coord-btn copy" onclick="copyCoordinates()">ğŸ“‹ ë³µì‚¬</button>
            <button class="coord-btn close" onclick="closeCoordinatePopup()">âŒ ë‹«ê¸°</button>
        </div>
    </div>

    <!-- ì „ì²´ í™”ë©´ ì§€ë„ -->
    <div id="map"></div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
        // ìƒí•˜ì´ ê´€ê´‘ ë°ì´í„°
        const shanghaiData = {
            "shanghai_tourism": {
                "attractions": [
                    {
                        "name": "ì™€ì´íƒ„ (The Bund)",
                        "address": "í™©í‘¸ê°• ì™¸ë°±ë„êµë¶€í„° ì§„ë§ë™ë£¨ê¹Œì§€ì˜ ê±°ë¦¬",
                        "latitude": 31.2366,
                        "longitude": 121.4856,
                        "description": "ë²ˆì˜ê³¼ ì—­ì‚¬ì˜ í”ì ì´ ê³µì¡´í•˜ëŠ” ì•¼ê²½ ëª…ì†Œ",
                        "features": ["í’ê²½", "ìŒì‹", "ë¬¸í™”", "ì—­ì‚¬"]
                    },
                    {
                        "name": "ë™ë°©ëª…ì£¼",
                        "address": "í‘¸ë™ì‹ êµ¬ ì„¸ê¸°ëŒ€ë¡œ 1í˜¸",
                        "latitude": 31.2420,
                        "longitude": 121.4950,
                        "description": "í™©í‘¸ê°• ì–‘ìª½ ì „ê²½ì„ ê°ìƒí•  ìˆ˜ ìˆëŠ” ëŒ€í‘œì ì¸ ì „ë§ëŒ€",
                        "features": ["ì „ë§ëŒ€", "ë…íŠ¹í•œ ê±´ì¶•"]
                    },
                    {
                        "name": "ìƒí•˜ì´ ë°•ë¬¼ê´€",
                        "address": "N/A",
                        "latitude": 31.2248,
                        "longitude": 121.4690,
                        "description": "í’ë¶€í•œ ì¤‘êµ­ ì˜ˆìˆ í’ˆê³¼ ì—­ì‚¬ ì»¬ë ‰ì…˜ì„ ì „ì‹œí•˜ëŠ” ë¬¸í™”ì‹œì„¤",
                        "features": ["ë¬´ë£Œ ì…ì¥", "ë¬¸í™”ì‹œì„¤"]
                    },
                    {
                        "name": "ì˜ˆì›",
                        "address": "ì˜ˆì›ë¡œ 218í˜¸",
                        "latitude": 31.2242,
                        "longitude": 121.4858,
                        "description": "ì¤‘êµ­ ì „í†µ ì •ì›ì´ ì˜ ë³´ì¡´ëœ íœ´ì‹ì²˜",
                        "features": ["ì—­ì‚¬ì  ì „í†µì •ì›"]
                    },
                    {
                        "name": "ë‚œì§•ë™ë£¨",
                        "address": "ë‚œì§•ë™ë£¨ ë³´í–‰ì ê±°ë¦¬",
                        "latitude": 31.23658,
                        "longitude": 121.48486,
                        "description": "ì‡¼í•‘ê³¼ ë¬¸í™”ê°€ ê³µì¡´í•˜ëŠ” ë„ì‹¬ ë³´í–‰ì ê±°ë¦¬",
                        "features": ["ì‡¼í•‘", "ë¬¸í™”"]
                    },
                    {
                        "name": "ì‹ ì²œì§€",
                        "address": "ì‹ ì²œì§€ ì§€ì—­",
                        "latitude": 31.21935,
                        "longitude": 121.47523,
                        "description": "íŠ¸ë Œë””í•œ ë ˆìŠ¤í† ë‘ê³¼ ë°”ê°€ ë°€ì§‘í•œ ë„ì‹¬ ì§€ì—­",
                        "features": ["íŠ¸ë Œë”” ë ˆìŠ¤í† ë‘"]
                    },
                    {
                        "name": "ìƒí•˜ì´ íƒ€ì›Œ",
                        "address": "501 Yincheng Rd (M), Lujiazui, Pudong, Shanghai, ì¤‘êµ­ 200120",
                        "latitude": 31.2336,
                        "longitude": 121.50545,
                        "description": "í˜„ëŒ€ ìƒí•˜ì´ì˜ ëœë“œë§ˆí¬ ê±´ë¬¼",
                        "features": ["í˜„ëŒ€", "ì „ë§"]
                    },
                    {
                        "name": "ìƒí•˜ì´ ì„¸ê³„ê¸ˆìœµì„¼í„°",
                        "address": "100 Shiji Blvd, Lujiazui, Pudong, Shanghai, ì¤‘êµ­ 200120",
                        "latitude": 31.23489,
                        "longitude": 121.5074,
                        "description": "ë¹„ì¦ˆë‹ˆìŠ¤ì™€ ê¸ˆìœµ ì¤‘ì‹¬ì˜ ìƒì§•ì  ëœë“œë§ˆí¬",
                        "features": ["í˜„ëŒ€", "ë¹„ì¦ˆë‹ˆìŠ¤"]
                    },
                    {
                        "name": "í†ˆì¦ˆíŒ¡",
                        "address": "210å¼„ Taikang Rd, Huangpu, ì¤‘êµ­ 200023",
                        "latitude": 31.20881,
                        "longitude": 121.46887,
                        "description": "ì˜ˆìˆ , ë¬¸í™”, ì‡¼í•‘ì´ ê²°í•©ëœ ë…íŠ¹í•œ ê³µê°„",
                        "features": ["ì˜ˆìˆ ", "ë¬¸í™”"]
                    },
                    {
                        "name": "ëŒ€í•œë¯¼êµ­ ìƒí•˜ì´ ì„ì‹œì •ë¶€",
                        "address": "ì¤‘êµ­ ìƒí•˜ì´ ì‹œ í™©í‘¸ êµ¬ é‚®æ”¿ç¼–ç : 200020",
                        "latitude": 31.21725,
                        "longitude": 121.47469,
                        "description": "í•œêµ­ ë…ë¦½ìš´ë™ì˜ ì—­ì‚¬ì  ì¥ì†Œ",
                        "features": ["ì—­ì‚¬", "ë¬¸í™”"]
                    }
                ],
                "restaurants": [
                    {
                        "name": "ë§›ì§€ ì•„ë‘ë©´ê´€",
                        "address": "36 Sinan Rd, Huangpu, Shanghai, ì¤‘êµ­ 200041",
                        "latitude": 31.21759,
                        "longitude": 121.46648,
                        "description": "ì •í†µ ì¤‘ì‹ ë©´ìš”ë¦¬ ì „ë¬¸ì ",
                        "menu": []
                    },
                    {
                        "name": "ì‚¬ê³„ë¯¼ë³µ",
                        "address": "ì¤‘êµ­ Shanghai, Huangpu, æ·®æµ·ä¸­è·¯282",
                        "latitude": 31.22381,
                        "longitude": 121.47493,
                        "description": "ë¶ê²½ì˜¤ë¦¬ ì „ë¬¸ ë ˆìŠ¤í† ë‘",
                        "menu": ["ë¶ê²½ì˜¤ë¦¬"]
                    },
                    {
                        "name": "í€˜ì´ë¬¸ë£½",
                        "address": "Hongqiao World Shopping Center 4ì¸µ",
                        "latitude": 31.21859,
                        "longitude": 121.41709,
                        "description": "ëŒ€í‘œ ë©”ë‰´: å«åŒ–é¸¡ (ê±°ì§€ë‹­)",
                        "menu": ["å«åŒ–é¸¡"]
                    },
                    {
                        "name": "è®¸ç•™å±±",
                        "address": "ì¤‘êµ­ Shanghai, Huangpu, Nanjing Rd (E), 300å·æ’åŸºåäººè´­ç‰©ä¸­ì‹¬ é‚®æ”¿ç¼–ç : 200002",
                        "latitude": 31.23812,
                        "longitude": 121.48409,
                        "description": "í™ì½© ìŠ¤íƒ€ì¼ ë””ì €íŠ¸ ì „ë¬¸ì ",
                        "menu": []
                    },
                    {
                        "name": "èŸ¹å°å‹",
                        "address": "å—äº¬ä¸œè·¯588å·ä¸ç»¸å•†å¦è´Ÿä¸€æ¥¼",
                        "latitude": 31.23577,
                        "longitude": 121.47916,
                        "description": "ê²Œìš”ë¦¬ ì „ë¬¸ì ",
                        "menu": ["ê²Œì‚´ë–¡êµ­ (58ìœ„ì•ˆ)", "ê²Œì‚´ë¹„ë¹”ë©´ (128ìœ„ì•ˆ)"]
                    },
                    {
                        "name": "ì˜ˆë§ˆ",
                        "address": "Shanghai IFC Mall ë‚´",
                        "latitude": 31.21569,
                        "longitude": 121.45845,
                        "description": "ì „í†µ ì¤‘ì‹ ìš”ë¦¬ ë ˆìŠ¤í† ë‘",
                        "menu": [
                            "Classic Braised Yellow Croaker with Rice Cake (198ìœ„ì•ˆ)",
                            "Home Style Turnip in Bone Soup (48ìœ„ì•ˆ)",
                            "Braised Pork and Abalone with Bamboo Shoots (138ìœ„ì•ˆ)",
                            "SautÃ©ed Seasonal Vegetable (36ìœ„ì•ˆ)",
                            "Fried Rice with Beef and Salty Vegetable (42ìœ„ì•ˆ)"
                        ]
                    },
                    {
                        "name": "ë¼ì˜¤ì§€ìŠ¤",
                        "address": "Shanghai IFC Mall",
                        "latitude": 31.21569,
                        "longitude": 121.45845,
                        "description": "ì¤‘ì‹ ì „í†µ ìš”ë¦¬",
                        "menu": ["èŠ¦è’¿ç‚’å¹²ä¸", "è‘±æ²¹æ‹Œë©´"]
                    },
                    {
                        "name": "ë¦¬ìœ„ì•ˆ",
                        "address": "Shanghai IFC Mall",
                        "latitude": 31.21569,
                        "longitude": 121.45845,
                        "description": "ì¤‘ì‹ ê³ ê¸‰ ìš”ë¦¬",
                        "menu": [
                            "é¾™è™¾æ±¤è´µå¦ƒæ³¡é¥­ (Â¥160/Â¥218)",
                            "å±±è¥¿æ£çš‡ç³• (35ìœ„ì•ˆ)"
                        ]
                    }
                ],
                "hotels": [
                    {
                        "name": "SSAW ë¶€í‹°í¬ í˜¸í…” ìƒí•˜ì´ ë²ˆë“œ",
                        "address": "No.839 Renmin Road, Huangpu District",
                        "latitude": 31.22753,
                        "longitude": 121.48461,
                        "description": "ì˜ˆì›ì—­ ê·¼ì²˜, ê°€ì¡± ë‹¨ìœ„ ë° ë¹„ì¦ˆë‹ˆìŠ¤ ì—¬í–‰ê° ì¶”ì²œ",
                        "features": ["ê³ ê¸‰ í˜¸í…”", "ë°˜ë ¤ë™ë¬¼ ë¶ˆê°€"]
                    },
                    {
                        "name": "í¬ë¦¬ìŠ¤íƒˆ ì˜¤ë Œì§€ í˜¸í…” ì™€ì´íƒ„ ì§€ì ",
                        "address": "No.511 Jinling East Road",
                        "latitude": 31.2387,
                        "longitude": 121.492,
                        "description": "ì™€ì´íƒ„ ê·¼ì²˜ í¸ë¦¬í•œ ìœ„ì¹˜",
                        "features": ["ê³ ê¸‰ ì‹œì„¤", "ë¹„ì¦ˆë‹ˆìŠ¤ ì¶”ì²œ"]
                    },
                    {
                        "name": "ì•„íˆ¬ì–´ í˜¸í…” ì‹ ì²œì§€ ì§€ì ",
                        "address": "Building 7, No. 199, Hefei Road",
                        "latitude": 31.2197,
                        "longitude": 121.4755,
                        "description": "ì‹ ì²œì§€ ì§€í•˜ì² ì—­ ê·¼ì²˜",
                        "features": ["ëª¨ë˜í•œ ì‹œì„¤", "í¸ë¦¬í•œ êµí†µ"]
                    },
                    {
                        "name": "JI í˜¸í…” ì¸ë¯¼ê´‘ì¥ ì§€ì ",
                        "address": "í™©í‘¸êµ¬ í’ì–‘ë¡œ ì‚¬ì›ìƒê°€",
                        "latitude": 31.2304,
                        "longitude": 121.4737,
                        "description": "ì¸ë¯¼ê´‘ì¥ ë„ë³´ 5ë¶„",
                        "features": ["ê°€ì„±ë¹„ ì¢‹ìŒ", "ì¤‘ì‹¬ê°€ ìœ„ì¹˜"]
                    }
                ],
                "airports": [
                    {
                        "name": "ìƒí•˜ì´ í‘¸ë™êµ­ì œê³µí•­",
                        "address": "Shanghai Pudong International Airport",
                        "latitude": 31.143333,
                        "longitude": 121.805275,
                        "description": "êµ­ì œ í•­ê³µì˜ ì¤‘ìš”í•œ í—ˆë¸Œ",
                        "features": ["ëŒ€í˜• í„°ë¯¸ë„", "í•­ê³µ í—ˆë¸Œ"]
                    }
                ]
            }
        };

        let map;
        let markers = L.featureGroup();
        let clickTimeout;
        let isLongPress = false;
        let currentTileLayer;

        document.addEventListener('DOMContentLoaded', () => {
            initializeMap();
        });

        function initializeMap() {
            // ì§€ë„ ì´ˆê¸°í™”
            map = L.map('map').setView([31.2304, 121.4737], 12);

            // ë‹¤ì–‘í•œ íƒ€ì¼ ë ˆì´ì–´ ì •ì˜ (XYZ íƒ€ì¼ ì„œë¹„ìŠ¤ë“¤)
            const tileLayers = {
                satellite: L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
                    attribution: '&copy; <a href="https://www.esri.com/">Esri</a>, Maxar, GeoEye, Earthstar Geographics',
                    maxZoom: 19
                }),
                street: L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
                    maxZoom: 19
                }),
                terrain: L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}', {
                    attribution: '&copy; <a href="https://www.esri.com/">Esri</a>, USGS, NOAA',
                    maxZoom: 19
                }),
                'google-style': L.tileLayer('https://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png', {
                    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="https://www.openstreetmap.fr/">OSM France</a>',
                    maxZoom: 20,
                    subdomains: ['a', 'b', 'c']
                }),
                cartodb: L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
                    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
                    subdomains: 'abcd',
                    maxZoom: 19
                }),
                dark: L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
                    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
                    subdomains: 'abcd',
                    maxZoom: 19
                })
            };

            // ê¸°ë³¸ ìœ„ì„± íƒ€ì¼ ë ˆì´ì–´ ì¶”ê°€
            currentTileLayer = tileLayers.satellite;
            currentTileLayer.addTo(map);

            // íƒ€ì¼ ë ˆì´ì–´ ë³€ê²½ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            document.querySelectorAll('input[name="tile-layer"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    if (this.checked) {
                        // ê¸°ì¡´ íƒ€ì¼ ë ˆì´ì–´ ì œê±°
                        map.removeLayer(currentTileLayer);
                        
                        // ìƒˆ íƒ€ì¼ ë ˆì´ì–´ ì¶”ê°€
                        currentTileLayer = tileLayers[this.value];
                        currentTileLayer.addTo(map);
                        
                        // í™œì„± ìƒíƒœ ì—…ë°ì´íŠ¸
                        document.querySelectorAll('.tile-option').forEach(option => {
                            option.classList.remove('active');
                        });
                        this.parentElement.classList.add('active');
                    }
                });
            });

            // ë§ˆì»¤ ë ˆì´ì–´ ê·¸ë£¹ì„ ì§€ë„ì— ì¶”ê°€
            markers.addTo(map);

            // ë§ˆì»¤ í‘œì‹œ
            displayMarkers();

            // ì§€ë„ í´ë¦­/ê¸¸ê²Œ ëˆ„ë¥´ê¸° ì´ë²¤íŠ¸ ì¶”ê°€
            setupMapEvents();
        }

        function displayMarkers() {
            markers.clearLayers();

            // ëª¨ë“  ì¥ì†Œ ë°ì´í„°ë¥¼ í•˜ë‚˜ì˜ ë°°ì—´ë¡œ í•©ì¹˜ê¸°
            const allPlaces = [
                ...shanghaiData.shanghai_tourism.attractions.map(place => ({...place, type: 'attractions'})),
                ...shanghaiData.shanghai_tourism.restaurants.map(place => ({...place, type: 'restaurants'})),
                ...shanghaiData.shanghai_tourism.hotels.map(place => ({...place, type: 'hotels'})),
                ...shanghaiData.shanghai_tourism.airports.map(place => ({...place, type: 'airports'}))
            ];

            allPlaces.forEach(place => {
                const marker = L.marker([place.latitude, place.longitude], {
                    icon: createCustomIcon(place.type)
                }).addTo(markers);

                marker.bindTooltip(place.name, {
                    permanent: true,
                    direction: 'right',
                    offset: [12, 0],
                    className: 'place-label'
                });

                marker.on('click', () => {
                    displayPlaceDetails(place);
                    map.flyTo([place.latitude, place.longitude], 15);
                });
            });

            // íŠ¹ë³„ ìœ„ì¹˜ ë§ˆì»¤ ì¶”ê°€ (31.2275456, 121.4847685)
            const specialMarker = L.marker([31.2275456, 121.4847685], {
                icon: createSpecialLocationIcon()
            }).addTo(markers);

            specialMarker.bindTooltip('ğŸ“ íŠ¹ë³„ ìœ„ì¹˜', {
                permanent: true,
                direction: 'right',
                offset: [20, 0],
                className: 'place-label special-location-label'
            });

            specialMarker.on('click', () => {
                displaySpecialLocationDetails();
                map.flyTo([31.2275456, 121.4847685], 16);
            });

            // ëª¨ë“  ë§ˆì»¤ê°€ ë³´ì´ë„ë¡ ì§€ë„ ë·° ì¡°ì •
            if (markers.getLayers().length > 0) {
                map.fitBounds(markers.getBounds().pad(0.1));
            }
        }

        function createCustomIcon(type) {
            let iconClass, bgClass;

            switch (type) {
                case 'attractions':
                    iconClass = 'fas fa-camera';
                    bgClass = 'tourism-bg';
                    break;
                case 'restaurants':
                    iconClass = 'fas fa-utensils';
                    bgClass = 'restaurant-bg';
                    break;
                case 'airports':
                    iconClass = 'fas fa-plane';
                    bgClass = 'airport-bg';
                    break;
                case 'hotels':
                    iconClass = 'fas fa-bed';
                    bgClass = 'accommodation-bg';
                    break;
                default:
                    iconClass = 'fas fa-map-marker-alt';
                    bgClass = 'tourism-bg';
            }

            return L.divIcon({
                className: 'custom-marker-icon',
                html: `<div class="marker-content ${bgClass}">
                         <i class="${iconClass}"></i>
                       </div>`,
                iconSize: [18, 18],
                iconAnchor: [9, 9],
                tooltipAnchor: [0, -15]
            });
        }

        function createSpecialLocationIcon() {
            return L.divIcon({
                className: 'custom-marker-icon',
                html: `<div class="special-marker-content special-location-bg">
                         <i class="fas fa-star"></i>
                       </div>`,
                iconSize: [40, 40],
                iconAnchor: [20, 20],
                tooltipAnchor: [0, -25]
            });
        }

        function displaySpecialLocationDetails() {
            const infoBox = document.getElementById('place-details');
            const placeContent = document.getElementById('place-content');
            
            let detailsHtml = `
                <div class="place-type-badge" style="background-color: #f39c12;">
                    â­ íŠ¹ë³„ ìœ„ì¹˜
                </div>
                <h3><i class="fas fa-star"></i> í™•ì¸ëœ ì¢Œí‘œ ìœ„ì¹˜</h3>
                <p><strong>ğŸ“ ì •í™•í•œ ì¢Œí‘œ:</strong> 31.2275456, 121.4847685</p>
                <p><strong>ğŸ¯ ì„¤ëª…:</strong> ì‚¬ìš©ìê°€ í™•ì¸í•œ ì‹¤ì œ ìœ„ì¹˜ì…ë‹ˆë‹¤.</p>
                <p><strong>âœ¨ íŠ¹ì§•:</strong> GPSë¡œ í™•ì¸ëœ ì •í™•í•œ ì¢Œí‘œ</p>
            `;

            placeContent.innerHTML = detailsHtml;
            infoBox.classList.add('show');
        }

        function displayPlaceDetails(place) {
            const infoBox = document.getElementById('place-details');
            const placeContent = document.getElementById('place-content');
            
            let detailsHtml = `
                <div class="place-type-badge type-${place.type}">
                    ${getTypeIcon(place.type)} ${getTypeDisplayName(place.type)}
                </div>
                <h3><i class="fas fa-map-marker-alt"></i> ${place.name}</h3>
            `;
            
            if (place.description) {
                detailsHtml += `<p><strong>ğŸ¯ ì„¤ëª…:</strong> ${place.description}</p>`;
            }
            
            if (place.address && place.address !== "N/A") {
                detailsHtml += `<p><strong>ğŸ“ ì£¼ì†Œ:</strong> ${place.address}</p>`;
            }
            
            if (place.features && place.features.length > 0) {
                detailsHtml += `<p><strong>âœ¨ íŠ¹ì§•:</strong> ${place.features.join(', ')}</p>`;
            }
            
            if (place.menu && place.menu.length > 0) {
                detailsHtml += `<p><strong>ğŸ½ï¸ ë©”ë‰´:</strong></p><ul>`;
                place.menu.forEach(item => {
                    detailsHtml += `<li>${item}</li>`;
                });
                detailsHtml += `</ul>`;
            }

            placeContent.innerHTML = detailsHtml;
            infoBox.classList.add('show');
        }

        function closeInfoBox() {
            const infoBox = document.getElementById('place-details');
            infoBox.classList.remove('show');
        }

        function getTypeIcon(type) {
            switch (type) {
                case 'attractions': return 'ğŸ“·';
                case 'restaurants': return 'ğŸ´';
                case 'airports': return 'âœˆï¸';
                case 'hotels': return 'ğŸ¨';
                default: return 'ğŸ“';
            }
        }

        function getTypeDisplayName(type) {
            switch (type) {
                case 'attractions': return 'ê´€ê´‘ì§€';
                case 'restaurants': return 'ìŒì‹ì ';
                case 'airports': return 'ê³µí•­';
                case 'hotels': return 'í˜¸í…”';
                default: return 'ê¸°íƒ€';
            }
        }

        // ESC í‚¤ë¡œ ì •ë³´ ë°•ìŠ¤ì™€ ì¢Œí‘œ íŒì—… ë‹«ê¸°
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeInfoBox();
                closeCoordinatePopup();
            }
        });

        // ì˜¤ë²„ë ˆì´ í´ë¦­ì‹œ íŒì—… ë‹«ê¸°
        document.getElementById('coordinate-overlay').addEventListener('click', closeCoordinatePopup);

        // ì§€ë„ í´ë¦­ ì‹œ ì •ë³´ ë°•ìŠ¤ ë‹«ê¸° (ê¸¸ê²Œ ëˆ„ë¥´ê¸°ê°€ ì•„ë‹Œ ê²½ìš°ë§Œ)
        map.on('click', (e) => {
            // ê¸¸ê²Œ ëˆ„ë¥´ê¸°ê°€ ì•„ë‹ˆê³ , ë§ˆì»¤ê°€ ì•„ë‹Œ ì§€ë„ ì˜ì—­ì„ í´ë¦­í–ˆì„ ë•Œë§Œ ì •ë³´ ë°•ìŠ¤ ë‹«ê¸°
            if (!isLongPress && e.originalEvent && e.originalEvent.target === e.originalEvent.currentTarget) {
                closeInfoBox();
            }
            isLongPress = false; // í´ë¦­ í›„ í”Œë˜ê·¸ ë¦¬ì…‹
        });
    </script>
</body>
</html>
